{"version":3,"file":"dist/sun-rest.min.js","sources":["dist/sun-rest.js"],"names":["angular","undefined","module","service","this","copyProperties","from","to","exclude","i","props","prop","description","Object","getOwnPropertyNames","length","getOwnPropertyDescriptor","indexOf","defineProperty","inherit","Child","Parent","isFunction","DefaultChild","$super","constructor","apply","arguments","prototype","F","f","stringJsonParser","stringPath","object","parts","x","returnValue","split","_","isObject","sunRest","isDefined","isString","isArray","forEach","extend","copy","provider","propertyModifier","requestInterceptor","requestErrorInterceptor","responseInterceptor","responseErrorInterceptor","properties","dataExtractor","baseUrl","responseDataListLocation","responseDataItemLocation","modelIdProperty","updateMethod","updatePartial","trailingSlashes","get","set","value","slice","bool","Error","defineProperties","$get","mapValues","param","factory","$q","sunUtils","sunRestConfig","sunRestRouter","sunRestSchema","defaultProperties","route","routeIdProperty","extractRouteIdProperty","applyPropertyModifier","router","name","relations","dataListLocation","dataItemLocation","autoParse","paramDefaults","keys","match","modifier","newProperty","property","wrappedRequestInterceptor","bind","httpConfig","result","call","when","wrappedResponseInterceptor","response","path","defaultDataExtractor","data","_dataExtractor","encodeUriQuery","val","pctEncodeSpaces","encodeURIComponent","replace","encodeUriSegment","template","defaults","urlParams","generateUrl","action","params","url","_normalizeUrl","_injectParams","buildConfig","config","actionUrl","_extractUrlParams","key","RegExp","test","_getBaseUrl","_prependBaseUrl","encodedVal","urlParam","hasOwnProperty","leadingSlashes","tail","charAt","SunRestRouterNested","parentRouter","parentDefaultsCB","create","parentUrl","sunRestCollection","resources","schema","BaseModel","mngrClass","enumerable","isEmpty","toJSON","mngr","_setDefaults","populating","prop_name","default_value","$http","$injector","hasBody","method","toUpperCase","isValidDottedPath","MEMBER_NAME_REGEX","lookupDottedPath","obj","ii","getCollection","relationConfig","collection","resource","sunRestModelManager","model","remoteFlag","modifyFlag","originalData","changedProperties","deleteFlag","updateRelations","NEW","DELETED","DIRTY","LOADED","NORMALIZE_INCOMING","NORMALIZE_OUTGOING","populate","normalizeData","toNative","reset","saveRemoteFlag","returnData","toJson","way","normalizedData","isOutgoing","remoteProperty","normalizedKey","noneNormalizedKey","extractParams","actionParams","ids","substr","save","modifyLocal","promise","isNew","state","simpleRequest","then","remove","objectRequest","Model","modelClass","dataLocation","extracted","item","push","$resolved","reject","$promise","self","newConfig","populateRelated","populateOptions","prom","map","opts","options","related","request","resp","all","relationName","sunRestNestedModelManager","isRemote","overrides","child","sunRestRouterNested","baseSchema","subCollection","nested","parentModelClass","ChildModel","sunRestBaseModel","sunRestModelFactory","ModelClass","modelProperties","customSetter","customGetter","customProperty","getter","setter","res","normalizeOptions","isBoolean","find","one","query","id"],"mappings":"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"}